# PySpark Products & Categories

## Описание

PySpark-приложение с графическим интерфейсом для работы с продуктами, категориями и их связями (многие-ко-многим). Данные можно редактировать через GUI, а также импортировать и экспортировать в формате JSON.

## Возможности
- Просмотр, добавление, редактирование и удаление продуктов, категорий и связей
- Импорт и экспорт данных в JSON-файле
- Анализ: вывод всех пар «Имя продукта – Имя категории» и продуктов без категорий

## Формат данных для импорта/экспорта

Импорт и экспорт поддерживаются только в формате JSON следующей структуры:

```json
{
  "products": [[1, "Молоко"], [2, "Хлеб"], ...],
  "categories": [[1, "Молочные"], [2, "Фрукты"], ...],
  "product_category": [[1, 1], [2, 3], ...]
}
```
- `products` — список пар [ID, "Имя продукта"]
- `categories` — список пар [ID, "Имя категории"]
- `product_category` — список пар [ID продукта, ID категории]

## Кнопки интерфейса
- **Сохранить данные** — сохраняет текущие данные в файл `products_data.json`
- **Импорт** — загружает данные из выбранного JSON-файла
- **Экспорт** — сохраняет текущие данные в выбранный JSON-файл

## Запуск GUI
```bash
python pyspark/gui.py
```

## Пример запуска анализа
Вкладка "Анализ" покажет пары "Имя продукта – Имя категории" и продукты без категорий на основе текущих данных.

## Пример JSON для импорта/экспорта
```json
{
  "products": [[1, "Молоко"], [2, "Хлеб"]],
  "categories": [[1, "Молочные"], [2, "Выпечка"]],
  "product_category": [[1, 1], [2, 2]]
}
```

## Структура данных
- products: product_id, product_name
- categories: category_id, category_name
- product_category: product_id, category_id

## Запуск

```bash
spark-submit main.py
```

или (если установлен pyspark для локального теста):

```bash
python main.py
```

## Пример вывода

```
Пары "Имя продукта – Имя категории":
+------------+-------------+
|product_name|category_name|
+------------+-------------+
|Молоко      |Молочные     |
|Сыр         |Молочные     |
|Хлеб        |Выпечка      |
|Яблоко      |Фрукты       |
+------------+-------------+

Продукты без категорий:
+------------+
|product_name|
+------------+
|Кефир       |
+------------+
``` 